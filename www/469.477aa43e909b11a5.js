"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[469],{469:(O,d,l)=>{l.r(d),l.d(d,{ListaDetallePage:()=>k});var _=l(8434),g=l(3092),a=l(5218),u=l(3083),n=l(1360),p=l(7544),f=l(3366);function m(e,o){1&e&&n.nrm(0,"ion-loading",7)}function h(e,o){if(1&e){const s=n.RV6();n.j41(0,"ion-item",15),n.bIt("click",function(){const i=n.eBV(s).$implicit,r=n.XpG(4);return n.Njj(r.verCancion(i.id))}),n.j41(1,"ion-label"),n.EFF(2),n.k0s()()}if(2&e){const s=o.$implicit;n.Y8G("@fadeInStagger",void 0),n.R7$(2),n.JRh(s.nombre)}}function b(e,o){if(1&e&&(n.j41(0,"div",12)(1,"ion-list",13),n.DNE(2,h,3,2,"ion-item",14),n.k0s()()),2&e){const s=n.XpG().$implicit;n.Y8G("@expandCollapse",void 0),n.R7$(2),n.Y8G("ngForOf",s.songs)}}function v(e,o){if(1&e){const s=n.RV6();n.qex(0),n.j41(1,"ion-item",9),n.bIt("click",function(){const i=n.eBV(s).$implicit;return n.Njj(i.open=!i.open)}),n.j41(2,"ion-label"),n.EFF(3),n.k0s(),n.nrm(4,"ion-icon",10),n.k0s(),n.DNE(5,b,3,2,"div",11),n.bVm()}if(2&e){const s=o.$implicit;n.R7$(3),n.JRh(s.name),n.R7$(),n.Y8G("name",s.open?"chevron-up-outline":"chevron-down-outline"),n.R7$(),n.Y8G("ngIf",s.open)}}function P(e,o){if(1&e&&(n.j41(0,"div"),n.DNE(1,v,6,3,"ng-container",8),n.k0s()),2&e){const s=n.XpG();n.R7$(),n.Y8G("ngForOf",s.sections)}}function D(e,o){1&e&&(n.j41(0,"div",16)(1,"div",17),n.EFF(2,"\u{1f614}"),n.k0s(),n.j41(3,"div",18),n.EFF(4,"No se encontraron canciones en esta lista"),n.k0s()())}let k=(()=>{var e;class o{constructor(t,i,r){this.route=t,this.apiService=i,this.router=r,this.cancionesAgrupadas={},this.sections=[],this.loading=!0,this.categorias={0:"Todas las canciones",1:"Entrada",2:"Canto de Perd\xf3n",3:"Gloria",4:"Salmo",5:"Antes del Evangelio",6:"Despu\xe9s del Evangelio",7:"Ofertorio",8:"Santo",9:"Prefacio",10:"Padre Nuestro",11:"Canto de Paz",12:"Cordero",13:"Comuni\xf3n",14:"Canto Final"}}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.apiService.getLista(Number(t)).subscribe({next:i=>{this.lista=i,this.obtenerCancionesMultiples()},error:i=>{console.error("Error cargando lista:",i),this.loading=!1}})}obtenerCancionesMultiples(){if(!this.lista||!this.lista.id_canciones)return void(this.loading=!1);const t=this.lista.id_canciones.split("~").map(i=>i.split("/")[0]);0!==t.length?this.apiService.getMultiplesCanciones(t.join("~")).subscribe({next:i=>{this.agruparCanciones(i),this.loading=!1},error:i=>{console.error("Error cargando canciones:",i),this.loading=!1}}):this.loading=!1}agruparCanciones(t){const i={};for(let r of this.lista.id_canciones.split("~")){const[c,C]=r.split("/"),E=Number(c),M=Number(C);i[E]=M}for(let r of t){const c=i[r.id];void 0!==c&&(this.cancionesAgrupadas[c]||(this.cancionesAgrupadas[c]=[]),this.cancionesAgrupadas[c].push(r))}this.sections=Object.entries(this.categorias).map(([r,c])=>({name:c,songs:this.cancionesAgrupadas[+r]||[],open:!0}))}cancionesDisponibles(){return this.sections.some(t=>t.songs.length>0)}verCancion(t){const i=this.route.snapshot.paramMap.get("id");this.router.navigate(["/cancion",t],{queryParams:{fromList:i}})}goBack(){history.back()}}return(e=o).\u0275fac=function(t){return new(t||e)(n.rXU(p.nX),n.rXU(f.G),n.rXU(p.Ix))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-lista-detalle"]],decls:7,vars:6,consts:[[3,"title","showBack","backUrl"],[1,"background-content"],[1,"overlay"],[1,"content-wrapper","contenido"],["message","Cargando lista...","spinner","circles",4,"ngIf"],[4,"ngIf"],["class","no-results",4,"ngIf"],["message","Cargando lista...","spinner","circles"],[4,"ngFor","ngForOf"],["color","light","lines","full",1,"list-header","glass-item",3,"click"],["slot","end",3,"name"],["class","song-list",4,"ngIf"],[1,"song-list"],["lines","none"],["class","list-item glass-song",3,"click",4,"ngFor","ngForOf"],[1,"list-item","glass-song",3,"click"],[1,"no-results"],[1,"emoji"],[1,"message"]],template:function(t,i){1&t&&(n.nrm(0,"app-navbar",0),n.j41(1,"ion-content",1),n.nrm(2,"div",2),n.j41(3,"div",3),n.DNE(4,m,1,0,"ion-loading",4)(5,P,2,1,"div",5)(6,D,5,0,"div",6),n.k0s()()),2&t&&(n.Y8G("title",(null==i.lista?null:i.lista.nombre)||"Detalle Lista")("showBack",!0)("backUrl","/listas"),n.R7$(4),n.Y8G("ngIf",i.loading),n.R7$(),n.Y8G("ngIf",!i.loading&&i.cancionesDisponibles()),n.R7$(),n.Y8G("ngIf",!i.loading&&!i.cancionesDisponibles()))},dependencies:[g.bv,g.W9,g.iq,g.uz,g.he,g.nf,g.rQ,_.MD,_.Sq,_.bT,u._],styles:[".contenido[_ngcontent-%COMP%]{margin:0 10px}ion-header[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .05);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.2)}.glass-header[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .05);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}ion-toolbar[_ngcontent-%COMP%]{--color: white}.list-header[_ngcontent-%COMP%]{background:#ffffff14;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border-radius:12px;margin-top:10px}.glass-item[_ngcontent-%COMP%]{--background: transparent;--color: white}.song-list[_ngcontent-%COMP%]{margin-top:5px}.glass-song[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border-radius:10px;margin-bottom:5px;cursor:pointer;transition:transform .2s ease}.glass-song[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.no-results[_ngcontent-%COMP%]{color:#111010;text-align:center;margin-top:30px;font-size:18px}"],data:{animation:[(0,a.hZ)("expandCollapse",[(0,a.kY)(":enter",[(0,a.iF)({height:0,opacity:0}),(0,a.i0)("300ms ease-out",(0,a.iF)({height:"*",opacity:1})),(0,a.P)("@fadeInStagger",[(0,a.yc)(100,(0,a.MA)())],{optional:!0})]),(0,a.kY)(":leave",[(0,a.P)("@fadeInStagger",[(0,a.yc)(50,(0,a.MA)())],{optional:!0}),(0,a.i0)("300ms ease-in",(0,a.iF)({height:0,opacity:0}))])]),(0,a.hZ)("fadeInStagger",[(0,a.kY)(":enter",[(0,a.iF)({opacity:0,transform:"translateY(-10px)"}),(0,a.i0)("400ms ease-out",(0,a.iF)({opacity:1,transform:"translateY(0)"}))])])]}}),o})()}}]);