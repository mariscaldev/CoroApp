import"./chunk-SSW7SZ5O.js";import{a as R,b as U}from"./chunk-X4O2IR5J.js";import{c as y,d as b,f as d,g as h,h as P,i as S,j as M}from"./chunk-637CQDAJ.js";import{A as x,B as k,C as _,E as f,F as I,P as E,Pa as A,Q as L,S as F,Sa as j,Ua as V,Va as $,Wa as B,X as N,Xa as q,Z as T,fb as z,g as v,h as C,n as l,p as u,q as O,r as g,t as r,v as s,w as c,x as m,y as D,z as w}from"./chunk-HCWSO466.js";import"./chunk-AQJKJO6F.js";import"./chunk-VORI6RXH.js";import"./chunk-T2ZGFQGW.js";import"./chunk-IP3IRUG3.js";import"./chunk-VYB3L4JF.js";import"./chunk-HC6MZPB3.js";import"./chunk-5LMKNUS2.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-5S2DIWXE.js";import"./chunk-LEIMCQKJ.js";import"./chunk-NHXHI6VP.js";import"./chunk-EKM5P5PM.js";import"./chunk-GNOVVPTF.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-4KO2SR2V.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-45D6LERB.js";import"./chunk-JUNFP4SE.js";import"./chunk-5J5TQ4C2.js";import"./chunk-RMCYG6SW.js";import"./chunk-LYYJ2XOB.js";import"./chunk-3IVKBF6N.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import"./chunk-RW4GY4BD.js";function J(t,o){t&1&&m(0,"ion-loading",7)}function K(t,o){if(t&1){let a=x();s(0,"ion-item",15),k("click",function(){let e=v(a).$implicit,i=_(4);return C(i.verCancion(e.id))}),s(1,"ion-label"),f(2),c()()}if(t&2){let a=o.$implicit;r("@fadeInStagger",void 0),l(2),I(a.nombre)}}function Q(t,o){if(t&1&&(s(0,"div",12)(1,"ion-list",13),g(2,K,3,2,"ion-item",14),c()()),t&2){let a=_().$implicit;r("@expandCollapse",void 0),l(2),r("ngForOf",a.songs)}}function W(t,o){if(t&1){let a=x();D(0),s(1,"ion-item",9),k("click",function(){let e=v(a).$implicit;return C(e.open=!e.open)}),s(2,"ion-label"),f(3),c(),m(4,"ion-icon",10),c(),g(5,Q,3,2,"div",11),w()}if(t&2){let a=o.$implicit;l(3),I(a.name),l(),r("name",a.open?"chevron-up-outline":"chevron-down-outline"),l(),r("ngIf",a.open)}}function X(t,o){if(t&1&&(s(0,"div"),g(1,W,6,3,"ng-container",8),c()),t&2){let a=_();l(),r("ngForOf",a.sections)}}function Z(t,o){t&1&&(s(0,"div",16)(1,"div",17),f(2,"\u{1F614}"),c(),s(3,"div",18),f(4,"No se encontraron canciones en esta lista"),c()())}var de=(()=>{let o=class o{constructor(n,e,i){this.route=n,this.apiService=e,this.router=i,this.cancionesAgrupadas={},this.sections=[],this.loading=!0,this.categorias={0:"Todas las canciones",1:"Entrada",2:"Canto de Perd\xF3n",3:"Gloria",4:"Salmo",5:"Antes del Evangelio",6:"Despu\xE9s del Evangelio",7:"Ofertorio",8:"Santo",9:"Prefacio",10:"Padre Nuestro",11:"Canto de Paz",12:"Cordero",13:"Comuni\xF3n",14:"Canto Final"}}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&this.apiService.getLista(Number(n)).subscribe({next:e=>{this.lista=e,this.obtenerCancionesMultiples()},error:e=>{console.error("Error cargando lista:",e),this.loading=!1}})}obtenerCancionesMultiples(){if(!this.lista||!this.lista.id_canciones){this.loading=!1;return}let n=this.lista.id_canciones.split("~").map(e=>e.split("/")[0]);if(n.length===0){this.loading=!1;return}this.apiService.getMultiplesCanciones(n.join("~")).subscribe({next:e=>{this.agruparCanciones(e),this.loading=!1},error:e=>{console.error("Error cargando canciones:",e),this.loading=!1}})}agruparCanciones(n){let e={};for(let i of this.lista.id_canciones.split("~")){let[p,Y]=i.split("/"),G=Number(p),H=Number(Y);e[G]=H}for(let i of n){let p=e[i.id];p!==void 0&&(this.cancionesAgrupadas[p]||(this.cancionesAgrupadas[p]=[]),this.cancionesAgrupadas[p].push(i))}this.sections=Object.entries(this.categorias).map(([i,p])=>({name:p,songs:this.cancionesAgrupadas[+i]||[],open:!0}))}cancionesDisponibles(){return this.sections.some(n=>n.songs.length>0)}verCancion(n){let e=this.route.snapshot.paramMap.get("id");this.router.navigate(["/cancion",n],{queryParams:{fromList:e}})}goBack(){history.back()}};o.\u0275fac=function(e){return new(e||o)(u(N),u(U),u(T))},o.\u0275cmp=O({type:o,selectors:[["app-lista-detalle"]],decls:7,vars:6,consts:[[3,"title","showBack","backUrl"],[1,"background-content"],[1,"overlay"],[1,"content-wrapper","contenido"],["message","Cargando lista...","spinner","circles",4,"ngIf"],[4,"ngIf"],["class","no-results",4,"ngIf"],["message","Cargando lista...","spinner","circles"],[4,"ngFor","ngForOf"],["color","light","lines","full",1,"list-header","glass-item",3,"click"],["slot","end",3,"name"],["class","song-list",4,"ngIf"],[1,"song-list"],["lines","none"],["class","list-item glass-song",3,"click",4,"ngFor","ngForOf"],[1,"list-item","glass-song",3,"click"],[1,"no-results"],[1,"emoji"],[1,"message"]],template:function(e,i){e&1&&(m(0,"app-navbar",0),s(1,"ion-content",1),m(2,"div",2),s(3,"div",3),g(4,J,1,0,"ion-loading",4)(5,X,2,1,"div",5)(6,Z,5,0,"div",6),c()()),e&2&&(r("title",(i.lista==null?null:i.lista.nombre)||"Detalle Lista")("showBack",!0)("backUrl","/listas"),l(4),r("ngIf",i.loading),l(),r("ngIf",!i.loading&&i.cancionesDisponibles()),l(),r("ngIf",!i.loading&&!i.cancionesDisponibles()))},dependencies:[z,A,j,V,$,B,q,F,E,L,R],styles:[".contenido[_ngcontent-%COMP%]{margin:0 10px}ion-header[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .05);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.2)}.glass-header[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .05);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}ion-toolbar[_ngcontent-%COMP%]{--color: white}.list-header[_ngcontent-%COMP%]{background:#ffffff14;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border-radius:12px;margin-top:10px}.glass-item[_ngcontent-%COMP%]{--background: transparent;--color: white}.song-list[_ngcontent-%COMP%]{margin-top:5px}.glass-song[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border-radius:10px;margin-bottom:5px;cursor:pointer;transition:transform .2s ease}.glass-song[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.no-results[_ngcontent-%COMP%]{color:#111010;text-align:center;margin-top:30px;font-size:18px}"],data:{animation:[y("expandCollapse",[h(":enter",[d({height:0,opacity:0}),b("300ms ease-out",d({height:"*",opacity:1})),S("@fadeInStagger",[M(100,P())],{optional:!0})]),h(":leave",[S("@fadeInStagger",[M(50,P())],{optional:!0}),b("300ms ease-in",d({height:0,opacity:0}))])]),y("fadeInStagger",[h(":enter",[d({opacity:0,transform:"translateY(-10px)"}),b("400ms ease-out",d({opacity:1,transform:"translateY(0)"}))])])]}});let t=o;return t})();export{de as ListaDetallePage};
